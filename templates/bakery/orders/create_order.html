{% extends "base.html" %}
{% block content %}
  <form action="/bakery/orders" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {% if errors %}
      {{errors}}
    {% endif %}

    <div id="order-items">
      <div id="order-item">
        <div>
          <label for="id_cake">Pastel</label>
          <select name="cake" id="id_cake" required>
            <option value selected>Selecciona un pastel</option>
            {% for cake in cakes %}
            <option value="{{cake.id}}">{{cake.name}} - ${{cake.price}}</option>
            {% endfor %}
          </select>
        </div>
        <div>
          <label for="id_quantity">Cantidad</label>
          <input type="number" name="quantity" id="id_quantity" min=0 required>
        </div>
        <button type="button" onclick="deleteForm(event)">eliminar</button>
      </div>
    </div>
    <button type="button" onclick="addForm()"> Agregar pastel </button>
    <button type="submit" class="btn btn-primary">Aceptar</button>

  </form>
  <script>
    const child = document.getElementById('order-item')
    const cloneChild = child.cloneNode(true)
    
    const addForm = () => {
      const father = document.getElementById('order-items');
      const clone = cloneChild.cloneNode(true)
      father.appendChild(clone)
    }

    const deleteForm = event => {
      console.log(event.target.parentElement.remove())
    }
  </script>
{% endblock content %}
